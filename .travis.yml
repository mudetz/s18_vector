language: cpp
sudo: false

matrix:
    include:
        - os: linux
          compiler: gcc-5
          addons: &gcc5
              apt:
                  sources:
                      - kalakris-cmake
                      - ubuntu-toolchain-r-test
                  packages:
                      - cmake
                      - g++-5
          env: CC=gcc-5 CXX=g++-5 STDLIB=libstdc++

install:
    - git clone --depth=1 https://github.com/simongog/sdsl-lite ${TRAVIS_BUILD_DIR}/sdsl/src
    - cd ${TRAVIS_BUILD_DIR}/sdsl/src
    - ./install.sh ${TRAVIS_BUILD_DIR}/sdsl/build

before_script:
    - $CXX --version

jobs:
    include:
        - stage: unittest
          script:
              - cd ${TRAVIS_BUILD_DIR}/test
              - make
              - ./build/test-suite --reporter compact

stages:
    - compile
    - test
